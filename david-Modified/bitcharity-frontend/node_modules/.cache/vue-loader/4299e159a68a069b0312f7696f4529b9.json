{"remainingRequest":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/src/components/EditSalePrice.vue?vue&type=style&index=0&id=2cc50a58&scoped=true&lang=css&","dependencies":[{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/src/components/EditSalePrice.vue","mtime":1605742047848},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5oZWFkaW5nIHsKICBwYWRkaW5nLXRvcDogMzBweDsKICBmb250LXNpemU6IDIwcHg7Cn0K"},{"version":3,"sources":["EditSalePrice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA;AACA;AACA;AACA","file":"EditSalePrice.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <p class=\"heading\">Listing Price</p>\n    <input v-model=\"price\">\n    <p class=\"heading\">Fee Summary</p>\n    <p>Collection Fee: {{ this.collectionFee * 100 }}%</p>\n    <p>Maker Marketplace Fee: {{ this.makerMarketPlaceFee * 100 }}%</p>\n    <p>Taker Marketplace Fee: {{ this.takerMarketPlaceFee * 100 }}%</p>\n    <p>You will receive {{ this.amount }} WAX</p>\n    <b-button id=\"confirm-button\" variant=\"warning\" @click=\"editSale\">Edit Price</b-button>\n  </div>\n</template>\n\n\n<script>\nimport { bus } from '../event-bus.js';\nimport { mapGetters } from 'vuex'\nexport default {\n  name: 'EditSalePrice',\n  props: ['listingPrice', 'saleID', 'assetID', 'collectionFee'],\n  data() {\n    return {\n      price: this.listingPrice,\n      settlement_symbol: \"8,WAX\",\n      maker_marketplace: \"l5oaw.wam\",\n      recipient: \"atomicmarket\",\n      recipient_asset_ids: [],\n      memo: \"sale\",\n      makerMarketPlaceFee: 0.01,\n      takerMarketPlaceFee: 0.01\n    }\n  },\n  computed: {\n    listing_price: function() {\n      var p = String(this.price)\n      if(p.includes('.')){\n        var decimals = p.split('.')[1].length\n        for(var i=0; i<(8-decimals); i++){\n          p = p + \"0\"\n        }\n      }\n      else {\n        p = p + \".00000000\"\n      }\n      return p\n    },\n    amount: function() {\n      //console.log(\"price: \" + this.price)\n      return (this.price * (1 - Number(this.collectionFee) - Number(this.makerMarketPlaceFee) - Number(this.takerMarketPlaceFee)))\n    },\n    ...mapGetters([\n      'getWax',\n      'getBlocksBehind',\n      'getExpireSeconds',\n    ])\n  },\n  methods: {\n    async editSale() {\n      if(!this.getWax.api) {\n        return console.log(\"Need to Login first\")\n      }\n      try {\n        bus.$emit('signing')\n        this.result = await this.getWax.api.transact({\n          actions: [{\n            account: 'atomicmarket',\n            name: 'cancelsale',\n            authorization: [{\n              actor: this.getWax.userAccount,\n              permission: 'active',\n            }],\n            data: {\n              sale_id: [Number(this.saleID)],\n            },\n          },\n          {\n            account: 'atomicmarket',\n            name: 'announcesale',\n            authorization: [{\n              actor: this.getWax.userAccount,\n              permission: 'active',\n            }],\n            data: {\n              seller: this.getWax.userAccount,\n              asset_ids: [Number(this.assetID)],\n              listing_price: this.listing_price + \" WAX\",\n              settlement_symbol: this.settlement_symbol,\n              maker_marketplace: this.maker_marketplace,\n            },\n          },\n          {\n            account: 'atomicassets',\n            name: 'createoffer',\n            authorization: [{\n              actor: this.getWax.userAccount,\n              permission: 'active',\n            }],\n            data: {\n              sender: this.getWax.userAccount,\n              recipient: this.recipient,\n              sender_asset_ids: [Number(this.assetID)],\n              recipient_asset_ids: this.recipient_asset_ids,\n              memo: this.memo\n            },\n          }]\n        }, {\n          blocksBehind: this.getBlocksBehind,\n          expireSeconds: this.getExpireSeconds\n        })\n        //console.log(this.result)\n        bus.$emit('createSuccess',this.result.transaction_id)\n      }\n      catch (e) {\n        this.result = e\n        //console.log(e)\n        bus.$emit('createFailed',this.result)\n      }\n    },\n  }\n}\n</script>\n\n\n<style scoped>\n.heading {\n  padding-top: 30px;\n  font-size: 20px;\n}\n</style>"]}]}