{"remainingRequest":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/src/components/EditSalePrice.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/src/components/EditSalePrice.vue","mtime":1605742047848},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJ1cyB9IGZyb20gJy4uL2V2ZW50LWJ1cy5qcyc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0VkaXRTYWxlUHJpY2UnLAogIHByb3BzOiBbJ2xpc3RpbmdQcmljZScsICdzYWxlSUQnLCAnYXNzZXRJRCcsICdjb2xsZWN0aW9uRmVlJ10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByaWNlOiB0aGlzLmxpc3RpbmdQcmljZSwKICAgICAgc2V0dGxlbWVudF9zeW1ib2w6ICI4LFdBWCIsCiAgICAgIG1ha2VyX21hcmtldHBsYWNlOiAibDVvYXcud2FtIiwKICAgICAgcmVjaXBpZW50OiAiYXRvbWljbWFya2V0IiwKICAgICAgcmVjaXBpZW50X2Fzc2V0X2lkczogW10sCiAgICAgIG1lbW86ICJzYWxlIiwKICAgICAgbWFrZXJNYXJrZXRQbGFjZUZlZTogMC4wMSwKICAgICAgdGFrZXJNYXJrZXRQbGFjZUZlZTogMC4wMQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxpc3RpbmdfcHJpY2U6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgcCA9IFN0cmluZyh0aGlzLnByaWNlKQogICAgICBpZihwLmluY2x1ZGVzKCcuJykpewogICAgICAgIHZhciBkZWNpbWFscyA9IHAuc3BsaXQoJy4nKVsxXS5sZW5ndGgKICAgICAgICBmb3IodmFyIGk9MDsgaTwoOC1kZWNpbWFscyk7IGkrKyl7CiAgICAgICAgICBwID0gcCArICIwIgogICAgICAgIH0KICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBwID0gcCArICIuMDAwMDAwMDAiCiAgICAgIH0KICAgICAgcmV0dXJuIHAKICAgIH0sCiAgICBhbW91bnQ6IGZ1bmN0aW9uKCkgewogICAgICAvL2NvbnNvbGUubG9nKCJwcmljZTogIiArIHRoaXMucHJpY2UpCiAgICAgIHJldHVybiAodGhpcy5wcmljZSAqICgxIC0gTnVtYmVyKHRoaXMuY29sbGVjdGlvbkZlZSkgLSBOdW1iZXIodGhpcy5tYWtlck1hcmtldFBsYWNlRmVlKSAtIE51bWJlcih0aGlzLnRha2VyTWFya2V0UGxhY2VGZWUpKSkKICAgIH0sCiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgJ2dldFdheCcsCiAgICAgICdnZXRCbG9ja3NCZWhpbmQnLAogICAgICAnZ2V0RXhwaXJlU2Vjb25kcycsCiAgICBdKQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZWRpdFNhbGUoKSB7CiAgICAgIGlmKCF0aGlzLmdldFdheC5hcGkpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coIk5lZWQgdG8gTG9naW4gZmlyc3QiKQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgYnVzLiRlbWl0KCdzaWduaW5nJykKICAgICAgICB0aGlzLnJlc3VsdCA9IGF3YWl0IHRoaXMuZ2V0V2F4LmFwaS50cmFuc2FjdCh7CiAgICAgICAgICBhY3Rpb25zOiBbewogICAgICAgICAgICBhY2NvdW50OiAnYXRvbWljbWFya2V0JywKICAgICAgICAgICAgbmFtZTogJ2NhbmNlbHNhbGUnLAogICAgICAgICAgICBhdXRob3JpemF0aW9uOiBbewogICAgICAgICAgICAgIGFjdG9yOiB0aGlzLmdldFdheC51c2VyQWNjb3VudCwKICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnYWN0aXZlJywKICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICBzYWxlX2lkOiBbTnVtYmVyKHRoaXMuc2FsZUlEKV0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBhY2NvdW50OiAnYXRvbWljbWFya2V0JywKICAgICAgICAgICAgbmFtZTogJ2Fubm91bmNlc2FsZScsCiAgICAgICAgICAgIGF1dGhvcml6YXRpb246IFt7CiAgICAgICAgICAgICAgYWN0b3I6IHRoaXMuZ2V0V2F4LnVzZXJBY2NvdW50LAogICAgICAgICAgICAgIHBlcm1pc3Npb246ICdhY3RpdmUnLAogICAgICAgICAgICB9XSwKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgIHNlbGxlcjogdGhpcy5nZXRXYXgudXNlckFjY291bnQsCiAgICAgICAgICAgICAgYXNzZXRfaWRzOiBbTnVtYmVyKHRoaXMuYXNzZXRJRCldLAogICAgICAgICAgICAgIGxpc3RpbmdfcHJpY2U6IHRoaXMubGlzdGluZ19wcmljZSArICIgV0FYIiwKICAgICAgICAgICAgICBzZXR0bGVtZW50X3N5bWJvbDogdGhpcy5zZXR0bGVtZW50X3N5bWJvbCwKICAgICAgICAgICAgICBtYWtlcl9tYXJrZXRwbGFjZTogdGhpcy5tYWtlcl9tYXJrZXRwbGFjZSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGFjY291bnQ6ICdhdG9taWNhc3NldHMnLAogICAgICAgICAgICBuYW1lOiAnY3JlYXRlb2ZmZXInLAogICAgICAgICAgICBhdXRob3JpemF0aW9uOiBbewogICAgICAgICAgICAgIGFjdG9yOiB0aGlzLmdldFdheC51c2VyQWNjb3VudCwKICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnYWN0aXZlJywKICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICBzZW5kZXI6IHRoaXMuZ2V0V2F4LnVzZXJBY2NvdW50LAogICAgICAgICAgICAgIHJlY2lwaWVudDogdGhpcy5yZWNpcGllbnQsCiAgICAgICAgICAgICAgc2VuZGVyX2Fzc2V0X2lkczogW051bWJlcih0aGlzLmFzc2V0SUQpXSwKICAgICAgICAgICAgICByZWNpcGllbnRfYXNzZXRfaWRzOiB0aGlzLnJlY2lwaWVudF9hc3NldF9pZHMsCiAgICAgICAgICAgICAgbWVtbzogdGhpcy5tZW1vCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9XQogICAgICAgIH0sIHsKICAgICAgICAgIGJsb2Nrc0JlaGluZDogdGhpcy5nZXRCbG9ja3NCZWhpbmQsCiAgICAgICAgICBleHBpcmVTZWNvbmRzOiB0aGlzLmdldEV4cGlyZVNlY29uZHMKICAgICAgICB9KQogICAgICAgIC8vY29uc29sZS5sb2codGhpcy5yZXN1bHQpCiAgICAgICAgYnVzLiRlbWl0KCdjcmVhdGVTdWNjZXNzJyx0aGlzLnJlc3VsdC50cmFuc2FjdGlvbl9pZCkKICAgICAgfQogICAgICBjYXRjaCAoZSkgewogICAgICAgIHRoaXMucmVzdWx0ID0gZQogICAgICAgIC8vY29uc29sZS5sb2coZSkKICAgICAgICBidXMuJGVtaXQoJ2NyZWF0ZUZhaWxlZCcsdGhpcy5yZXN1bHQpCiAgICAgIH0KICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["EditSalePrice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditSalePrice.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <p class=\"heading\">Listing Price</p>\n    <input v-model=\"price\">\n    <p class=\"heading\">Fee Summary</p>\n    <p>Collection Fee: {{ this.collectionFee * 100 }}%</p>\n    <p>Maker Marketplace Fee: {{ this.makerMarketPlaceFee * 100 }}%</p>\n    <p>Taker Marketplace Fee: {{ this.takerMarketPlaceFee * 100 }}%</p>\n    <p>You will receive {{ this.amount }} WAX</p>\n    <b-button id=\"confirm-button\" variant=\"warning\" @click=\"editSale\">Edit Price</b-button>\n  </div>\n</template>\n\n\n<script>\nimport { bus } from '../event-bus.js';\nimport { mapGetters } from 'vuex'\nexport default {\n  name: 'EditSalePrice',\n  props: ['listingPrice', 'saleID', 'assetID', 'collectionFee'],\n  data() {\n    return {\n      price: this.listingPrice,\n      settlement_symbol: \"8,WAX\",\n      maker_marketplace: \"l5oaw.wam\",\n      recipient: \"atomicmarket\",\n      recipient_asset_ids: [],\n      memo: \"sale\",\n      makerMarketPlaceFee: 0.01,\n      takerMarketPlaceFee: 0.01\n    }\n  },\n  computed: {\n    listing_price: function() {\n      var p = String(this.price)\n      if(p.includes('.')){\n        var decimals = p.split('.')[1].length\n        for(var i=0; i<(8-decimals); i++){\n          p = p + \"0\"\n        }\n      }\n      else {\n        p = p + \".00000000\"\n      }\n      return p\n    },\n    amount: function() {\n      //console.log(\"price: \" + this.price)\n      return (this.price * (1 - Number(this.collectionFee) - Number(this.makerMarketPlaceFee) - Number(this.takerMarketPlaceFee)))\n    },\n    ...mapGetters([\n      'getWax',\n      'getBlocksBehind',\n      'getExpireSeconds',\n    ])\n  },\n  methods: {\n    async editSale() {\n      if(!this.getWax.api) {\n        return console.log(\"Need to Login first\")\n      }\n      try {\n        bus.$emit('signing')\n        this.result = await this.getWax.api.transact({\n          actions: [{\n            account: 'atomicmarket',\n            name: 'cancelsale',\n            authorization: [{\n              actor: this.getWax.userAccount,\n              permission: 'active',\n            }],\n            data: {\n              sale_id: [Number(this.saleID)],\n            },\n          },\n          {\n            account: 'atomicmarket',\n            name: 'announcesale',\n            authorization: [{\n              actor: this.getWax.userAccount,\n              permission: 'active',\n            }],\n            data: {\n              seller: this.getWax.userAccount,\n              asset_ids: [Number(this.assetID)],\n              listing_price: this.listing_price + \" WAX\",\n              settlement_symbol: this.settlement_symbol,\n              maker_marketplace: this.maker_marketplace,\n            },\n          },\n          {\n            account: 'atomicassets',\n            name: 'createoffer',\n            authorization: [{\n              actor: this.getWax.userAccount,\n              permission: 'active',\n            }],\n            data: {\n              sender: this.getWax.userAccount,\n              recipient: this.recipient,\n              sender_asset_ids: [Number(this.assetID)],\n              recipient_asset_ids: this.recipient_asset_ids,\n              memo: this.memo\n            },\n          }]\n        }, {\n          blocksBehind: this.getBlocksBehind,\n          expireSeconds: this.getExpireSeconds\n        })\n        //console.log(this.result)\n        bus.$emit('createSuccess',this.result.transaction_id)\n      }\n      catch (e) {\n        this.result = e\n        //console.log(e)\n        bus.$emit('createFailed',this.result)\n      }\n    },\n  }\n}\n</script>\n\n\n<style scoped>\n.heading {\n  padding-top: 30px;\n  font-size: 20px;\n}\n</style>"]}]}