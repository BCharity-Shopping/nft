{"remainingRequest":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/src/views/MarketPlace.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/src/views/MarketPlace.vue","mtime":1605806474652},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgeyBCb290c3RyYXBWdWUsSWNvbnNQbHVnaW4gfSBmcm9tICdib290c3RyYXAtdnVlJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgJ2Jvb3RzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAubWluLmNzcycKaW1wb3J0ICdib290c3RyYXAvZGlzdC9qcy9ib290c3RyYXAubWluLmpzJwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7ClZ1ZS51c2UoQm9vdHN0cmFwVnVlKQpWdWUudXNlKEljb25zUGx1Z2luKQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6Im1hcmtldHBsYWNlIiwKICBjb21wb25lbnRzOnsKICB9LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6dW5kZWZpbmVkLAogICAgICBleGNoYW5nZVByaWNlVVNEOnVuZGVmaW5lZCwKICAgIH0KICB9LAogIG1vdW50ZWQoKXsKICAgIGF4aW9zLmdldCgnaHR0cHM6Ly93YXguYXBpLmF0b21pY2Fzc2V0cy5pby9hdG9taWNtYXJrZXQvdjEvc2FsZXMnKS50aGVuKChyZXNwKT0+ewogICAgICAgICAgdGhpcy5saXN0PXJlc3AuZGF0YS5kYXRhOwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5saXN0KQogICAgfSkKICAgIGF4aW9zLmdldCgnaHR0cHM6Ly9hcGkuY29pbmdlY2tvLmNvbS9hcGkvdjMvY29pbnMvd2F4P2xvY2FsaXphdGlvbj1mYWxzZSZ0aWNrZXJzPWZhbHNlJm1hcmtldF9kYXRhPXRydWUmY29tbXVuaXR5X2RhdGE9ZmFsc2UmZGV2ZWxvcGVyX2RhdGE9ZmFsc2Umc3BhcmtsaW5lPWZhbHNlJykKICAgICAgICAudGhlbigocmVzcCk9PnsKICAgICAgICAgIHRoaXMuZXhjaGFuZ2VQcmljZVVTRD1yZXNwLmRhdGEubWFya2V0X2RhdGEuY3VycmVudF9wcmljZS51c2QKICAgICAgICB9KQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGNvbnRhaW5zQ2hhcmFjdGVyOmZ1bmN0aW9uKHgpIHsKICAgICAgaWYgKHguaW5jbHVkZXMoImh0dHBzIikpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBqdW1wOmZ1bmN0aW9uICh4KXsKICAgICAgdGhpcy4kZW1pdCgnc2lzdGVyc2FpZCcsJ01vbSBzYWlkIGRvIHlvdXIgaG9tZSB3b3JrJykKICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6eH0pCgogICAgfSwKICAgIHdheFByaWNlRm9ybWF0OmZ1bmN0aW9uKHdheFByaWNlLHRva2VuX3ByZWNpc2lvbil7CiAgICAgIHZhciBQcmljZVNwbGl0PXdheFByaWNlLnN1YnN0cmluZygwLHdheFByaWNlLmxlbmd0aC10b2tlbl9wcmVjaXNpb24pCiAgICAgIHJldHVybiBQcmljZVNwbGl0OwogICAgfSwKICAgIHdhc1ByaWNlVVNEb2xsYXJDb252ZXJzaW9uOmZ1bmN0aW9uKHdheFByaWNlLHRva2VuX3ByZWNpc2lvbixleGNoYW5nZVJhdGUpewogICAgICB2YXIgUHJpY2VTcGxpdD1wYXJzZUludCh3YXhQcmljZS5zdWJzdHJpbmcoMCx3YXhQcmljZS5sZW5ndGgtdG9rZW5fcHJlY2lzaW9uKSk7CiAgICAgIGNvbnNvbGUubG9nKGV4Y2hhbmdlUmF0ZSk7CiAgICAgIHZhciB1c0RvbGxhcj0oUHJpY2VTcGxpdCpleGNoYW5nZVJhdGUpLnRvRml4ZWQoMik7CiAgICAgIHJldHVybiB1c0RvbGxhcjsKICAgIH0sCiAgICBhc3luYyBwdXJjaGFzZShpdGVtKXsKICAgICAgaWYoaXRlbS50YWtlcl9tYXJrZXRwbGFjZT09bnVsbCl7CiAgICAgICAgaXRlbS50YWtlcl9tYXJrZXRwbGFjZT0iIgogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKGl0ZW0pOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmdldFdheC51c2VyQWNjb3VudCk7CiAgICAgIGNvbnNvbGUubG9nKGl0ZW0ubWFya2V0X2NvbnRyYWN0KTsKICAgICAgY29uc29sZS5sb2coaXRlbS5zYWxlX2lkKTsKICAgICAgY29uc29sZS5sb2coaXRlbS50YWtlcl9tYXJrZXRwbGFjZSk7CiAgICAgIGNvbnNvbGUubG9nKCJtZW1vIDogZGVwb3NpdCIpOwogICAgICBjb25zb2xlLmxvZygicHJlY2lzaW9uIGlzICIraXRlbS5wcmljZS50b2tlbl9wcmVjaXNpb24pOwogICAgICB2YXIgbmV3UHJpY2UgPSBOdW1iZXIucGFyc2VGbG9hdCh0aGlzLndheFByaWNlRm9ybWF0KGl0ZW0ucHJpY2UuYW1vdW50LGl0ZW0ucHJpY2UudG9rZW5fcHJlY2lzaW9uKSkudG9GaXhlZChpdGVtLnByaWNlLnRva2VuX3ByZWNpc2lvbikrIiBXQVgiOwogICAgICBjb25zb2xlLmxvZyhuZXdQcmljZSk7CgogICAgICAgaWYoIXRoaXMuZ2V0V2F4LmFwaSl7CiAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZygiTmVlZCB0byBsb2dpbiBmaXJzdCIpCiAgICAgICAgICAgfQogICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgIHRoaXMucmVzdWx0PWF3YWl0IHRoaXMuZ2V0V2F4LmFwaS50cmFuc2FjdCh7CiAgICAgICAgICAgICAgICAgICBhY3Rpb25zOlt7CiAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogImVvc2lvLnRva2VuIiwKICAgICAgICAgICAgICAgICAgICBuYW1lOiAidHJhbnNmZXIiLAogICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjdG9yOiB0aGlzLmdldFdheC51c2VyQWNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjonYWN0aXZlJywKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206dGhpcy5nZXRXYXgudXNlckFjY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbW86J2RlcG9zaXQnLAogICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTpuZXdQcmljZSwKICAgICAgICAgICAgICAgICAgICAgICAgdG86J2F0b21pY21hcmtldCcsCiAgICAgICAgICAgICAgICAgICAgICAgfSx9LHsKICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudDogJ2F0b21pY21hcmtldCcsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwdXJjaGFzZXNhbGUnLAogICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBbewogICAgICAgICAgICAgICAgICAgICAgICAgIGFjdG9yOiB0aGlzLmdldFdheC51c2VyQWNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOidhY3RpdmUnLAogICAgICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICAgIGJ1eWVyOnRoaXMuZ2V0V2F4LnVzZXJBY2NvdW50LAogICAgICAgICAgICAgICAgICAgICAgICAgIGludGVuZGVkX2RlbHBoaV9tZWRpYW46MCwKICAgICAgICAgICAgICAgICAgICAgICAgICBzYWxlX2lkOml0ZW0uc2FsZV9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlcl9tYXJrZXRwbGFjZTppdGVtLnRha2VyX21hcmtldHBsYWNlLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgfSx7CiAgICAgICAgICAgICAgICAgICBibG9ja3NCZWhpbmQ6IDMsCiAgICAgICAgICAgICAgICAgICBleHBpcmVTZWNvbmRzOiAzMAogICAgICAgICAgICAgICB9KTsKICAgICAgICAgICB9CiAgICAgICAgICAgY2F0Y2goZSl7CiAgICAgICAgICAgICAgIHRoaXMucmVzdWx0PWUKICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgICAgICB9ICAKCiAgICB9CiAgfSwKICBjb21wdXRlZDp7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgICAnZ2V0V2F4JwogICAgICBdKSwKICAgIH0sCiAgd2F0Y2g6IHsKICAgICckcm91dGUnICgpIHsKICAgICAgdGhpcy4kcm91dGVyLmdvKDApOwogICAgfQogIH0sCgoKCgp9Cg=="},{"version":3,"sources":["MarketPlace.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA","file":"MarketPlace.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"main-block w-100\">\n    <div class=\"row\">\n        <div class=\"grid text-center px-0 MobileCardDesign\">\n          <div v-for=\"item in list\" :key=\"item.asset_id\">\n            <div class=\"large-card\">\n              <div class=\"picture-wrapper\">\n                <b-card>\n                  <div v-if=\"containsCharacter(item.assets[0].data.img)==true\">\n                    <b-card-img v-bind:src=\"item.assets[0].data.img\" style=\"height: 150px\">\n                    </b-card-img>\n                  </div>\n                  <div v-else>\n                  <b-card-img v-bind:src=\"'https://ipfs.io/ipfs/'+item.assets[0].data.img\" style=\"height: 150px\">\n                  </b-card-img>\n                  </div>\n                </b-card>\n                <b-card-text>\n                  <p>{{item.assets[0].template_mint}}</p>\n                  <p>{{item.assets[0].collection.collection_name}}</p>\n                  <p>{{ waxPriceFormat(item.price.amount,item.price.token_precision) }}.00{{item.price.token_symbol}}&nbsp;&nbsp;(${{wasPriceUSDollarConversion(item.price.amount,item.price.token_precision, exchangePriceUSD)}})</p>\n                  <p style=\"white-space: nowrap;overflow: hidden; text-overflow:ellipsis\">{{item.assets[0].name}}</p>\n                  <button class=\"btn btn-primary\" @click=\"$router.push({path:`/MarketPlace/${item.sale_id}`})\">Details</button>&nbsp;&nbsp;\n                  <button class=\"btn btn-primary\" @click=\"purchase(item)\">Buy</button>\n                </b-card-text>\n              </div>\n            </div>\n          </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped>\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-auto-rows: minmax(20px, auto);\n  grid-gap: 1rem;\n}\n.main-block {\n  padding: 35px 49px 33.5px 51px;\n}\n\n.large-card {\n  width: 180px;\n  border-radius: 20px;\n  box-shadow: 0 3px 20px rgba(0,0,0,.4);\n  display: inline-block;\n  height: fit-content;\n  margin: 15px 10px;\n  padding: 0;\n  position: relative;\n  text-align: left;\n  text-align: initial;\n\n}\n\n.large-card .content-wrapper {\n  background-color: #1a203c;\n  border-bottom-right-radius: 20px;\n  border-bottom-left-radius: 20px;\n  position: relative;\n}\n\n\n.large-card .picture-wrapper {\n  padding: 20px 10px;\n  border-top-left-radius: 40px;\n  border-top-right-radius:40px;\n  position: relative;\n}\n\n\n*, :after, :before {\n  box-sizing: border-box;\n}\n\n</style>\n\n<script>\nimport Vue from 'vue'\nimport { BootstrapVue,IconsPlugin } from 'bootstrap-vue'\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'bootstrap/dist/js/bootstrap.min.js'\nimport { mapGetters } from 'vuex';\nVue.use(BootstrapVue)\nVue.use(IconsPlugin)\n\nexport default {\n  name:\"marketplace\",\n  components:{\n  },\n  data(){\n    return {\n      list:undefined,\n      exchangePriceUSD:undefined,\n    }\n  },\n  mounted(){\n    axios.get('https://wax.api.atomicassets.io/atomicmarket/v1/sales').then((resp)=>{\n          this.list=resp.data.data;\n          console.log(this.list)\n    })\n    axios.get('https://api.coingecko.com/api/v3/coins/wax?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false')\n        .then((resp)=>{\n          this.exchangePriceUSD=resp.data.market_data.current_price.usd\n        })\n  },\n\n  methods: {\n    containsCharacter:function(x) {\n      if (x.includes(\"https\")) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    jump:function (x){\n      this.$emit('sistersaid','Mom said do your home work')\n      this.$router.push({path:x})\n\n    },\n    waxPriceFormat:function(waxPrice,token_precision){\n      var PriceSplit=waxPrice.substring(0,waxPrice.length-token_precision)\n      return PriceSplit;\n    },\n    wasPriceUSDollarConversion:function(waxPrice,token_precision,exchangeRate){\n      var PriceSplit=parseInt(waxPrice.substring(0,waxPrice.length-token_precision));\n      console.log(exchangeRate);\n      var usDollar=(PriceSplit*exchangeRate).toFixed(2);\n      return usDollar;\n    },\n    async purchase(item){\n      if(item.taker_marketplace==null){\n        item.taker_marketplace=\"\"\n      }\n      console.log(item);\n      console.log(this.getWax.userAccount);\n      console.log(item.market_contract);\n      console.log(item.sale_id);\n      console.log(item.taker_marketplace);\n      console.log(\"memo : deposit\");\n      console.log(\"precision is \"+item.price.token_precision);\n      var newPrice = Number.parseFloat(this.waxPriceFormat(item.price.amount,item.price.token_precision)).toFixed(item.price.token_precision)+\" WAX\";\n      console.log(newPrice);\n\n       if(!this.getWax.api){\n               return console.log(\"Need to login first\")\n           }\n           try {\n               this.result=await this.getWax.api.transact({\n                   actions:[{\n                    account: \"eosio.token\",\n                    name: \"transfer\",\n                    authorization: [{\n                        actor: this.getWax.userAccount,\n                        permission:'active',\n                    }],\n                    data: {\n                        from:this.getWax.userAccount,\n                        memo:'deposit',\n                        quantity:newPrice,\n                        to:'atomicmarket',\n                       },},{\n                        account: 'atomicmarket',\n                        name: 'purchasesale',\n                        authorization: [{\n                          actor: this.getWax.userAccount,\n                          permission:'active',\n                        }],\n                        data: {\n                          buyer:this.getWax.userAccount,\n                          intended_delphi_median:0,\n                          sale_id:item.sale_id,\n                          taker_marketplace:item.taker_marketplace,\n                      },\n                    }]\n                   \n                   \n               },{\n                   blocksBehind: 3,\n                   expireSeconds: 30\n               });\n           }\n           catch(e){\n               this.result=e\n               console.log(e)\n           }  \n\n    }\n  },\n  computed:{\n    ...mapGetters([\n        'getWax'\n      ]),\n    },\n  watch: {\n    '$route' () {\n      this.$router.go(0);\n    }\n  },\n\n\n\n\n}\n</script>\n"]}]}