{"remainingRequest":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/src/components/CreateSale.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/src/components/CreateSale.vue","mtime":1605719784182},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJ1cyB9IGZyb20gJy4uL2V2ZW50LWJ1cy5qcyc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NyZWF0ZVNhbGUnLAogIHByb3BzOiBbJ2Fzc2V0SUQnLCAnY29sbGVjdGlvbkZlZSddLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcmljZTogIiIsCiAgICAgIHNldHRsZW1lbnRfc3ltYm9sOiAiOCxXQVgiLAogICAgICBtYWtlcl9tYXJrZXRwbGFjZTogImw1b2F3LndhbSIsCiAgICAgIHJlY2lwaWVudDogImF0b21pY21hcmtldCIsCiAgICAgIHJlY2lwaWVudF9hc3NldF9pZHM6IFtdLAogICAgICBtZW1vOiAic2FsZSIsCiAgICAgIG1ha2VyTWFya2V0UGxhY2VGZWU6IDAuMDEsCiAgICAgIHRha2VyTWFya2V0UGxhY2VGZWU6IDAuMDEKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBsaXN0aW5nX3ByaWNlOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmKHRoaXMucHJpY2UhPSIiKXsKICAgICAgICB2YXIgcCA9IHRoaXMucHJpY2UKICAgICAgICBpZihwLmluY2x1ZGVzKCcuJykpewogICAgICAgICAgdmFyIGRlY2ltYWxzID0gcC5zcGxpdCgnLicpWzFdLmxlbmd0aAogICAgICAgICAgZm9yKHZhciBpPTA7IGk8KDgtZGVjaW1hbHMpOyBpKyspewogICAgICAgICAgICBwID0gcCArICIwIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHAgPSBwICsgIi4wMDAwMDAwMCIKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHAKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICByZXR1cm4gMC4wMDAwMDAwMAogICAgICB9CiAgICB9LAogICAgYW1vdW50OiBmdW5jdGlvbigpIHsKICAgICAgLy9jb25zb2xlLmxvZygicHJpY2U6ICIgKyB0aGlzLnByaWNlKQogICAgICBpZih0aGlzLnByaWNlIT0iIil7CiAgICAgICAgcmV0dXJuIChOdW1iZXIodGhpcy5wcmljZSkgKiAoMSAtIE51bWJlcih0aGlzLmNvbGxlY3Rpb25GZWUpIC0gTnVtYmVyKHRoaXMubWFrZXJNYXJrZXRQbGFjZUZlZSkgLSBOdW1iZXIodGhpcy50YWtlck1hcmtldFBsYWNlRmVlKSkpCiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgcmV0dXJuIDAuMDAwMDAwMDAKICAgICAgfQogICAgfSwKICAgIC4uLm1hcEdldHRlcnMoWwogICAgICAnZ2V0V2F4JywKICAgICAgJ2dldEJsb2Nrc0JlaGluZCcsCiAgICAgICdnZXRFeHBpcmVTZWNvbmRzJywKICAgIF0pCiAgfSwKICBtZXRob2RzOiB7CiAgICBlbXB0eUNoZWNrKCkgewogICAgICBpZih0aGlzLnByaWNlIT0iIil7CiAgICAgICAgdGhpcy5jcmVhdGVTYWxlKCkKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICB3aW5kb3cuYWxlcnQoIlBsZWFzZSBlbnRlciB0aGUgbGlzdGluZyBwcmljZSIpCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBjcmVhdGVTYWxlKCkgewogICAgICBpZighdGhpcy5nZXRXYXguYXBpKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCJOZWVkIHRvIExvZ2luIGZpcnN0IikKICAgICAgfQogICAgICB0cnkgewogICAgICAgIGJ1cy4kZW1pdCgnc2lnbmluZycpCiAgICAgICAgdGhpcy5yZXN1bHQgPSBhd2FpdCB0aGlzLmdldFdheC5hcGkudHJhbnNhY3QoewogICAgICAgICAgYWN0aW9uczogW3sKICAgICAgICAgICAgYWNjb3VudDogJ2F0b21pY21hcmtldCcsCiAgICAgICAgICAgIG5hbWU6ICdhbm5vdW5jZXNhbGUnLAogICAgICAgICAgICBhdXRob3JpemF0aW9uOiBbewogICAgICAgICAgICAgIGFjdG9yOiB0aGlzLmdldFdheC51c2VyQWNjb3VudCwKICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnYWN0aXZlJywKICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICBzZWxsZXI6IHRoaXMuZ2V0V2F4LnVzZXJBY2NvdW50LAogICAgICAgICAgICAgIGFzc2V0X2lkczogW051bWJlcih0aGlzLmFzc2V0SUQpXSwKICAgICAgICAgICAgICBsaXN0aW5nX3ByaWNlOiB0aGlzLmxpc3RpbmdfcHJpY2UgKyAiIFdBWCIsCiAgICAgICAgICAgICAgc2V0dGxlbWVudF9zeW1ib2w6IHRoaXMuc2V0dGxlbWVudF9zeW1ib2wsCiAgICAgICAgICAgICAgbWFrZXJfbWFya2V0cGxhY2U6IHRoaXMubWFrZXJfbWFya2V0cGxhY2UsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBhY2NvdW50OiAnYXRvbWljYXNzZXRzJywKICAgICAgICAgICAgbmFtZTogJ2NyZWF0ZW9mZmVyJywKICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogW3sKICAgICAgICAgICAgICBhY3RvcjogdGhpcy5nZXRXYXgudXNlckFjY291bnQsCiAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ2FjdGl2ZScsCiAgICAgICAgICAgIH1dLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgc2VuZGVyOiB0aGlzLmdldFdheC51c2VyQWNjb3VudCwKICAgICAgICAgICAgICByZWNpcGllbnQ6IHRoaXMucmVjaXBpZW50LAogICAgICAgICAgICAgIHNlbmRlcl9hc3NldF9pZHM6IFtOdW1iZXIodGhpcy5hc3NldElEKV0sCiAgICAgICAgICAgICAgcmVjaXBpZW50X2Fzc2V0X2lkczogdGhpcy5yZWNpcGllbnRfYXNzZXRfaWRzLAogICAgICAgICAgICAgIG1lbW86IHRoaXMubWVtbwogICAgICAgICAgICB9LAogICAgICAgICAgfV0KICAgICAgICB9LCB7CiAgICAgICAgICBibG9ja3NCZWhpbmQ6IHRoaXMuZ2V0QmxvY2tzQmVoaW5kLAogICAgICAgICAgZXhwaXJlU2Vjb25kczogdGhpcy5nZXRFeHBpcmVTZWNvbmRzCiAgICAgICAgfSkKICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMucmVzdWx0KQogICAgICAgIGJ1cy4kZW1pdCgnY3JlYXRlU3VjY2VzcycsdGhpcy5yZXN1bHQudHJhbnNhY3Rpb25faWQpCiAgICAgIH0KICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLnJlc3VsdCA9IGUKICAgICAgICAvL2NvbnNvbGUubG9nKGUpCiAgICAgICAgYnVzLiRlbWl0KCdjcmVhdGVGYWlsZWQnLHRoaXMucmVzdWx0KQogICAgICB9CiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["CreateSale.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateSale.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <p class=\"heading\">Listing Price</p>\n    <input v-model=\"price\" placeholder=\"Amount of Wax\">\n    <p class=\"heading\">Fee Summary</p>\n    <p>Collection Fee: {{ this.collectionFee * 100 }}%</p>\n    <p>Maker Marketplace Fee: {{ this.makerMarketPlaceFee * 100 }}%</p>\n    <p>Taker Marketplace Fee: {{ this.takerMarketPlaceFee * 100 }}%</p>\n    <p>You will receive {{ this.amount }} WAX</p>\n    <b-button id=\"confirm-button\" variant=\"success\" @click=\"emptyCheck\">Confirm</b-button>\n  </div>\n</template>\n\n\n<script>\nimport { bus } from '../event-bus.js';\nimport { mapGetters } from 'vuex'\nexport default {\n  name: 'CreateSale',\n  props: ['assetID', 'collectionFee'],\n  data() {\n    return {\n      price: \"\",\n      settlement_symbol: \"8,WAX\",\n      maker_marketplace: \"l5oaw.wam\",\n      recipient: \"atomicmarket\",\n      recipient_asset_ids: [],\n      memo: \"sale\",\n      makerMarketPlaceFee: 0.01,\n      takerMarketPlaceFee: 0.01\n    }\n  },\n  computed: {\n    listing_price: function () {\n      if(this.price!=\"\"){\n        var p = this.price\n        if(p.includes('.')){\n          var decimals = p.split('.')[1].length\n          for(var i=0; i<(8-decimals); i++){\n            p = p + \"0\"\n          }\n        }\n        else {\n          p = p + \".00000000\"\n        }\n        return p\n      }\n      else {\n        return 0.00000000\n      }\n    },\n    amount: function() {\n      //console.log(\"price: \" + this.price)\n      if(this.price!=\"\"){\n        return (Number(this.price) * (1 - Number(this.collectionFee) - Number(this.makerMarketPlaceFee) - Number(this.takerMarketPlaceFee)))\n      }\n      else {\n        return 0.00000000\n      }\n    },\n    ...mapGetters([\n      'getWax',\n      'getBlocksBehind',\n      'getExpireSeconds',\n    ])\n  },\n  methods: {\n    emptyCheck() {\n      if(this.price!=\"\"){\n        this.createSale()\n      }\n      else {\n        window.alert(\"Please enter the listing price\")\n      }\n    },\n    async createSale() {\n      if(!this.getWax.api) {\n        return console.log(\"Need to Login first\")\n      }\n      try {\n        bus.$emit('signing')\n        this.result = await this.getWax.api.transact({\n          actions: [{\n            account: 'atomicmarket',\n            name: 'announcesale',\n            authorization: [{\n              actor: this.getWax.userAccount,\n              permission: 'active',\n            }],\n            data: {\n              seller: this.getWax.userAccount,\n              asset_ids: [Number(this.assetID)],\n              listing_price: this.listing_price + \" WAX\",\n              settlement_symbol: this.settlement_symbol,\n              maker_marketplace: this.maker_marketplace,\n            },\n          },\n          {\n            account: 'atomicassets',\n            name: 'createoffer',\n            authorization: [{\n              actor: this.getWax.userAccount,\n              permission: 'active',\n            }],\n            data: {\n              sender: this.getWax.userAccount,\n              recipient: this.recipient,\n              sender_asset_ids: [Number(this.assetID)],\n              recipient_asset_ids: this.recipient_asset_ids,\n              memo: this.memo\n            },\n          }]\n        }, {\n          blocksBehind: this.getBlocksBehind,\n          expireSeconds: this.getExpireSeconds\n        })\n        //console.log(this.result)\n        bus.$emit('createSuccess',this.result.transaction_id)\n      }\n      catch (e) {\n        this.result = e\n        //console.log(e)\n        bus.$emit('createFailed',this.result)\n      }\n    },\n  },\n}\n</script>\n\n\n<style scoped>\n.heading {\n  padding-top: 20px;\n  font-size: 20px;\n}\n</style>\n"]}]}