{"remainingRequest":"/Users/davidshen/Desktop/BlockChain/BCharity /david-version2/bitcharity-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/davidshen/Desktop/BlockChain/BCharity /david-version2/bitcharity-frontend/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/davidshen/Desktop/BlockChain/BCharity /david-version2/bitcharity-frontend/src/components/Login.vue","mtime":1604605762288},{"path":"/Users/davidshen/Desktop/BlockChain/BCharity /david-version2/bitcharity-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/BCharity /david-version2/bitcharity-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/BCharity /david-version2/bitcharity-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/BCharity /david-version2/bitcharity-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIHdheGpzIGZyb20gIkB3YXhpby93YXhqcy9kaXN0IgpleHBvcnQgZGVmYXVsdHsKICBjb25maWc6ewogICAgaHR0cEVuZHBvaW50OiJodHRwczovL2NoYWluLndheC5pbyIsCiAgICBrZXlQcm92aWRlcjogWyc1S1F3clBid2RMNlBoWHVqeFczN0ZTU1FaMUppd3NTVDRjcVF6RGV5WHRQNzl6a3ZGRDMnXSwKICAgIGJyb2FkY2FzdDogdHJ1ZSwKICAgIHZlcmJvc2U6ZmFsc2UsCiAgICBzaWduOiB0cnVlCgogIH0sCiAgbmFtZTogJ0FwcCcsCiAgZGF0YSgpewogICAgcmV0dXJuIHsKICAgICAgdXNlckFjY291bnQ6ICIiLAogICAgICBwdWJLZXlzOiIiLAogICAgICB3YXg6IG5ldyB3YXhqcy5XYXhKUygnaHR0cHM6Ly93YXguZ3JleW1hc3MuY29tJywgbnVsbCwgbnVsbCwgZmFsc2UpLAogICAgICByZXN1bHQ6ICIiLAogICAgICB1c2VyTmFtZTogIiIsCiAgICAgIGxvZ2luU3RhdHVzOiAiVXNlciBpcyBub3QgbG9nZ2VkIGluIgogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2F5KCkgewogICAgICBhbGVydChgSGVsb2ApCiAgICB9LAogICAgYXN5bmMgbG9naW4oKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc29sZS5sb2coImxvZ2dpbmcgaW4gdGhyb3VnaCBXQ1ciKQogICAgICAgIHRoaXMudXNlckFjY291bnQgPSBhd2FpdCB0aGlzLndheC5sb2dpbigpCiAgICAgICAgdGhpcy5wdWJLZXlzID0gdGhpcy53YXgucHViS2V5cwogICAgICAgIHRoaXMudXNlck5hbWUgPSB0aGlzLndheC51c2VyQWNjb3VudAogICAgICAgIHRoaXMubG9naW5TdGF0dXMgPSBgVXNlciBoYXMgYXBwcm92ZWQgZEFwcCBhY2Nlc3NgCiAgICAgIH0KICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLmxvZ2luU3RhdHVzID0gYFVzZXIgZGVuaWVkIGRBcHAgYWNjZXNzYAogICAgICB9CiAgICB9LAogICAgYXN5bmMgdHJhbnNhY3QoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSBhd2FpdCB0aGlzLndheC5hcGkudHJhbnNhY3QoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBhY3Rpb25zOiBbewogICAgICAgICAgICAgICAgYWNjb3VudDogJ2Vvc2lvJywKICAgICAgICAgICAgICAgIG5hbWU6ICdkZWxlZ2F0ZWJ3JywKICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IFt7CiAgICAgICAgICAgICAgICAgIGFjdG9yOiB0aGlzLndheC51c2VyQWNjb3VudCwKICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ2FjdGl2ZScKICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICBmcm9tOiB0aGlzLndheC51c2VyQWNjb3VudCwKICAgICAgICAgICAgICAgICAgcmVjZWl2ZXI6IHRoaXMud2F4LnVzZXJBY2NvdW50LAogICAgICAgICAgICAgICAgICBzdGFrZV9uZXRfcXVhbnRpdHk6ICcwLjAwMDAwMDAxIFdBWCcsCiAgICAgICAgICAgICAgICAgIHN0YWtlX2NwdV9xdWFudGl0eTogJzAuMDAwMDAwMDAgV0FYJywKICAgICAgICAgICAgICAgICAgdHJhbnNmZXI6IGZhbHNlLAogICAgICAgICAgICAgICAgICBtZW1vOiAnVGhpcyBpcyBhIFdheEpTL0Nsb3VkIFdhbGxldCBEZW1vLicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9XQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgYmxvY2tzQmVoaW5kOiAzLAogICAgICAgICAgICAgIGV4cGlyZVNlY29uZHM6IDMwCiAgICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgY29uc29sZS5sb2coInRyYW5zYWN0IikKICAgICAgfQogICAgICBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBjcmVhdE1hcmtldCgpIHsKICAgICAgaWYoIXRoaXMud2F4LmFwaSl7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCJsb2dpbiBpcyByZXF1aXJlZCIpOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgY29uc29sZS5sb2codGhpcy53YXgudXNlckFjY291bnQpOwogICAgICAgIHRoaXMucmVzdWx0ID0gYXdhaXQgdGhpcy53YXguYXBpLnRyYW5zYWN0KAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgYWN0aW9uczogW3sKICAgICAgICAgICAgICAgIGFjY291bnQ6ICJhdG9taWNtYXJrZXQiLAogICAgICAgICAgICAgICAgbmFtZTogJ3JlZ21hcmtldCcsCiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBbewogICAgICAgICAgICAgICAgICBhY3RvcjogdGhpcy53YXgudXNlckFjY291bnQsCiAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdhY3RpdmUnCiAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgY3JlYXRvcjogImR0NXF3LndhbSIsCiAgICAgICAgICAgICAgICAgIG1hcmtldHBsYWNlX25hbWU6ICJCQ2hhcml0eSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9XQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgYmxvY2tzQmVoaW5kOiAzLAogICAgICAgICAgICAgIGV4cGlyZVNlY29uZHM6IDMwCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVzdWx0KTt9CiAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgfQogICAgfQogIH0KfQoK"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"login-block\">\n    <div class=\"login-button\" v-if='userAccount==\"\"'>\n      <button @click=\"login\">Login</button>\n    </div>\n    <div class=\"login-username\" v-else>\n      <p>{{ userName }}</p>\n      <p>Active: {{ pubKeys[0] }}</p>\n      <p>Owner: {{ pubKeys[1] }}</p>\n      <button @click=\"transact\">Transaction</button>\n      <button @click=\"creatMarket\">create market</button>\n    </div>\n    <div class=\"login-status\">\n      <p>Status: {{ loginStatus }}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as waxjs from \"@waxio/waxjs/dist\"\nexport default{\n  config:{\n    httpEndpoint:\"https://chain.wax.io\",\n    keyProvider: ['5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3'],\n    broadcast: true,\n    verbose:false,\n    sign: true\n\n  },\n  name: 'App',\n  data(){\n    return {\n      userAccount: \"\",\n      pubKeys:\"\",\n      wax: new waxjs.WaxJS('https://wax.greymass.com', null, null, false),\n      result: \"\",\n      userName: \"\",\n      loginStatus: \"User is not logged in\"\n    }\n  },\n  methods: {\n    say() {\n      alert(`Helo`)\n    },\n    async login() {\n      try {\n        console.log(\"logging in through WCW\")\n        this.userAccount = await this.wax.login()\n        this.pubKeys = this.wax.pubKeys\n        this.userName = this.wax.userAccount\n        this.loginStatus = `User has approved dApp access`\n      }\n      catch (e) {\n        this.loginStatus = `User denied dApp access`\n      }\n    },\n    async transact() {\n      try {\n        this.result = await this.wax.api.transact(\n            {\n              actions: [{\n                account: 'eosio',\n                name: 'delegatebw',\n                authorization: [{\n                  actor: this.wax.userAccount,\n                  permission: 'active'\n                }],\n                data: {\n                  from: this.wax.userAccount,\n                  receiver: this.wax.userAccount,\n                  stake_net_quantity: '0.00000001 WAX',\n                  stake_cpu_quantity: '0.00000000 WAX',\n                  transfer: false,\n                  memo: 'This is a WaxJS/Cloud Wallet Demo.'\n                }\n              }]\n            },\n            {\n              blocksBehind: 3,\n              expireSeconds: 30\n            }\n        )\n        console.log(\"transact\")\n      }\n      catch (e) {\n        console.log(e)\n      }\n    },\n    async creatMarket() {\n      if(!this.wax.api){\n        return console.log(\"login is required\");\n      }\n      try {\n        console.log(this.wax.userAccount);\n        this.result = await this.wax.api.transact(\n            {\n              actions: [{\n                account: \"atomicmarket\",\n                name: 'regmarket',\n                authorization: [{\n                  actor: this.wax.userAccount,\n                  permission: 'active'\n                }],\n                data: {\n                  creator: \"dt5qw.wam\",\n                  marketplace_name: \"BCharity\"\n                }\n              }]\n            }, {\n              blocksBehind: 3,\n              expireSeconds: 30\n            })\n            console.log(this.result);}\n      catch (e) {\n        console.log(e)\n      }\n    }\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>"]}]}