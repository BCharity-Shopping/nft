{"remainingRequest":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/src/views/MarketPlace.vue?vue&type=style&index=0&id=466e20bc&scoped=true&lang=css&","dependencies":[{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/src/views/MarketPlace.vue","mtime":1605730638598},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davidshen/Desktop/BlockChain/Bcharity-Version2/david-Modified/bitcharity-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5ncmlkIHsKICBkaXNwbGF5OiBncmlkOwogIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDQsIDFmcik7CiAgZ3JpZC1hdXRvLXJvd3M6IG1pbm1heCgyMHB4LCBhdXRvKTsKICBncmlkLWdhcDogMXJlbTsKfQoubWFpbi1ibG9jayB7CiAgcGFkZGluZzogMzVweCA0OXB4IDMzLjVweCA1MXB4Owp9CgoubGFyZ2UtY2FyZCB7CiAgd2lkdGg6IDE4MHB4OwogIGJvcmRlci1yYWRpdXM6IDIwcHg7CiAgYm94LXNoYWRvdzogMCAzcHggMjBweCByZ2JhKDAsMCwwLC40KTsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgaGVpZ2h0OiBmaXQtY29udGVudDsKICBtYXJnaW46IDE1cHggMTBweDsKICBwYWRkaW5nOiAwOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB0ZXh0LWFsaWduOiBsZWZ0OwogIHRleHQtYWxpZ246IGluaXRpYWw7Cgp9CgoubGFyZ2UtY2FyZCAuY29udGVudC13cmFwcGVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWEyMDNjOwogIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAyMHB4OwogIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDIwcHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgoKLmxhcmdlLWNhcmQgLnBpY3R1cmUtd3JhcHBlciB7CiAgcGFkZGluZzogMjBweCAxMHB4OwogIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDQwcHg7CiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6NDBweDsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCgoqLCA6YWZ0ZXIsIDpiZWZvcmUgewogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KCg=="},{"version":3,"sources":["MarketPlace.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"MarketPlace.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"main-block w-100\">\n    <div class=\"row\">\n        <div class=\"grid text-center px-0 MobileCardDesign\">\n          <div v-for=\"item in list\" :key=\"item.asset_id\">\n            <div class=\"large-card\">\n              <div class=\"picture-wrapper\">\n                <b-card>\n                  <div v-if=\"containsCharacter(item.assets[0].data.img)==true\">\n                    <b-card-img v-bind:src=\"item.assets[0].data.img\" style=\"height: 150px\">\n                    </b-card-img>\n                  </div>\n                  <div v-else>\n                  <b-card-img v-bind:src=\"'https://ipfs.io/ipfs/'+item.assets[0].data.img\" style=\"height: 150px\">\n                  </b-card-img>\n                  </div>\n                </b-card>\n                <b-card-text>\n                  <p>{{item.assets[0].template_mint}}</p>\n                  <p>{{item.assets[0].collection.collection_name}}</p>\n                  <p>{{ waxPriceFormat(item.price.amount,item.price.token_precision) }}.00{{item.price.token_symbol}}&nbsp;&nbsp;(${{wasPriceUSDollarConversion(item.price.amount,item.price.token_precision, exchangePriceUSD)}})</p>\n                  <p style=\"white-space: nowrap;overflow: hidden; text-overflow:ellipsis\">{{item.assets[0].name}}</p>\n                  <button class=\"btn btn-primary\" @click=\"jump(item.sale_id)\">Details</button>&nbsp;&nbsp;\n                  <button class=\"btn btn-primary\" @click=\"purchase(item)\">Buy</button>\n                </b-card-text>\n              </div>\n            </div>\n          </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped>\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-auto-rows: minmax(20px, auto);\n  grid-gap: 1rem;\n}\n.main-block {\n  padding: 35px 49px 33.5px 51px;\n}\n\n.large-card {\n  width: 180px;\n  border-radius: 20px;\n  box-shadow: 0 3px 20px rgba(0,0,0,.4);\n  display: inline-block;\n  height: fit-content;\n  margin: 15px 10px;\n  padding: 0;\n  position: relative;\n  text-align: left;\n  text-align: initial;\n\n}\n\n.large-card .content-wrapper {\n  background-color: #1a203c;\n  border-bottom-right-radius: 20px;\n  border-bottom-left-radius: 20px;\n  position: relative;\n}\n\n\n.large-card .picture-wrapper {\n  padding: 20px 10px;\n  border-top-left-radius: 40px;\n  border-top-right-radius:40px;\n  position: relative;\n}\n\n\n*, :after, :before {\n  box-sizing: border-box;\n}\n\n</style>\n\n<script>\nimport Vue from 'vue'\nimport { BootstrapVue,IconsPlugin } from 'bootstrap-vue'\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'bootstrap/dist/js/bootstrap.min.js'\nimport { mapGetters } from 'vuex';\nVue.use(BootstrapVue)\nVue.use(IconsPlugin)\n\nexport default {\n  name:\"marketplace\",\n  components:{\n  },\n  data(){\n    return {\n      list:undefined,\n      exchangePriceUSD:undefined,\n    }\n  },\n  mounted(){\n    axios.get('https://wax.api.atomicassets.io/atomicmarket/v1/sales').then((resp)=>{\n          this.list=resp.data.data;\n          console.log(this.list)\n    })\n    axios.get('https://api.coingecko.com/api/v3/coins/wax?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false')\n        .then((resp)=>{\n          this.exchangePriceUSD=resp.data.market_data.current_price.usd\n        })\n  },\n\n  methods: {\n    containsCharacter:function(x) {\n      if (x.includes(\"https\")) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    jump:function (x){\n      this.$emit('sistersaid','Mom said do your home work')\n      this.$router.push({path:x})\n\n    },\n    waxPriceFormat:function(waxPrice,token_precision){\n      var PriceSplit=waxPrice.substring(0,waxPrice.length-token_precision)\n      return PriceSplit;\n    },\n    wasPriceUSDollarConversion:function(waxPrice,token_precision,exchangeRate){\n      var PriceSplit=parseInt(waxPrice.substring(0,waxPrice.length-token_precision));\n      console.log(exchangeRate);\n      var usDollar=(PriceSplit*exchangeRate).toFixed(2);\n      return usDollar;\n    },\n    async purchase(item){\n      if(item.taker_marketplace==null){\n        item.taker_marketplace=\"\"\n      }\n      console.log(item);\n      console.log(this.getWax.userAccount);\n      console.log(item.market_contract);\n      console.log(item.sale_id);\n      console.log(item.taker_marketplace);\n      console.log(\"memo : deposit\");\n      console.log(\"precision is \"+item.price.token_precision);\n      var newPrice = Number.parseFloat(this.waxPriceFormat(item.price.amount,item.price.token_precision)).toFixed(item.price.token_precision)+\" WAX\";\n      console.log(newPrice);\n\n       if(!this.getWax.api){\n               return console.log(\"Need to login first\")\n           }\n           try {\n               this.result=await this.getWax.api.transact({\n                   actions:[{\n                    account: \"eosio.token\",\n                    name: \"transfer\",\n                    authorization: [{\n                        actor: this.getWax.userAccount,\n                        permission:'active',\n                    }],\n                    data: {\n                        from:this.getWax.userAccount,\n                        memo:'deposit',\n                        quantity:newPrice,\n                        to:'atomicmarket',\n                       },},{\n                        account: 'atomicmarket',\n                        name: 'purchasesale',\n                        authorization: [{\n                          actor: this.getWax.userAccount,\n                          permission:'active',\n                        }],\n                        data: {\n                          buyer:this.getWax.userAccount,\n                          intended_delphi_median:0,\n                          sale_id:item.sale_id,\n                          taker_marketplace:item.taker_marketplace,\n                      },\n                    }]\n                   \n                   \n               },{\n                   blocksBehind: 3,\n                   expireSeconds: 30\n               });\n           }\n           catch(e){\n               this.result=e\n               console.log(e)\n           }  \n\n    }\n  },\n  computed:{\n    ...mapGetters([\n        'getWax'\n      ]),\n    },\n  watch: {\n    '$route' () {\n      this.$router.go(0);\n    }\n  },\n\n\n\n\n}\n</script>\n"]}]}